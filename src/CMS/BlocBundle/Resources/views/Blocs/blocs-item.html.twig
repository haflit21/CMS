{% extends('::admin.html.twig') %}

{% block body %}

	<div class="row-fluid">
		<div class="span12">
			{% for flashMessage in app.session.flashbag.get('info') %}
			    <div class="alert alert-info">
			    	<button class="close" data-dismiss="alert" type="button">Ã—</button>
			        <strong>Notice</strong>
			        {{ flashMessage }}
			    </div>
			{% endfor %}
			<h1 class="pull-left">Bloc</h1>
		                  

		     <a href="{{ path('blocs_list') }}" class="btn btn-new btn-small pull-right"><i class="icon icon-chevron-left"></i> Retour</a>
		     <div class="clearfix sep3"></div>


			{% if id is defined %}
				<form class="form-horizontal" action="{{path('blocs_edit', {'id': id})}}" method="post" {{ form_enctype(form) }}>
			{% else %}
				<form class="form-horizontal" action="{{path('blocs_new', {'lang': lang})}}" method="post" {{ form_enctype(form) }}>
			{% endif %}
					<div class="span8">
						{{ form_widget(form) }}
	   		 			{{ form_rest(form) }}
	   		 			{% if bloctype is defined %}
							<input type="hidden" name="bloctype" />
						{% endif %}
						<div class="form-actions">
						    <a href="{{ path('blocs_list') }}" class="btn btn-small">{% trans %}Cancel{% endtrans %}</a>
                        	<button type="submit" class="btn btn-primary btn-small">{% trans %}Validate{% endtrans %}</button>
					    </div>
					</div>
				</form>
		</div>
	</div>

{% endblock body %}
{% block javascripts %}
<script type="text/javascript">
function loadImages() {
	$.ajax({
        url: '{{ path("medias_popup") }}',
        success: function(msg) {
            $('#modal-image .modal-body').html(msg);
        }
    });
    $('#modal-image').modal('show');
}

function addFile(elem) {

	$(elem).children('div.thumbnail').addClass('hover');

	var value = $('.image_field > input[type="hidden"]').attr('value');
	var src = $(elem).children('.thumbnail').children('img').attr('src');
	if(value == '')
		value = src;
	else
		value += '|' + src;
	$('.image_field > input[type="hidden"]').attr('value', value);

}

</script>
{% endblock %}
