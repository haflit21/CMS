{% extends "::admin.html.twig" %}
{% block title "Users" %}

{% block views %}
	<li><a href="#"><i class="icon-th"></i></a></li>
	<li><a href="#"><i class="icon-th-list"></i></a></li>
{% endblock views %}

{% block body %}
{% if app.session.hasFlash('error') %}
    <div class="alert alert-error">
  		<a class="close" data-dismiss="alert" href="#">×</a>
        {{ app.session.flash('error') }}
    </div>
{% elseif app.session.hasFlash('success') %}
    <div class="alert alert-success">
  		<a class="close" data-dismiss="alert" href="#">×</a>
        {{ app.session.flash('success') }}
    </div>
{% endif %}
<div class="span12">
<table class="table table-striped">
<thead>
	<tr>
		<th>Id</th>
		<th>Username</th>
		<th>Name</th>
		<th>Email</th>
		<th>Roles</th>
		<th colspan="2">Actions</th>
	</tr>
</thead>
<tbody>
{% for user in users %}
<tr>
	<td>{{ user.id }}</td>
	<td>{{ user.username }}</td>
	<td>{{ user.firstname }} {{ user.lastname }}</td>
	<td>{{ user.email }}</td>
	<td>
	{% set tab = '' %}
	{% for group in user.groups %}
		 {% set tab = [group.name] %}
	{% endfor %}
	{{ tab|join(',') }}
	</td>
	<td><a href="{{ path('edit_user', { 'id' : user.id }) }}" class="icon-edit">&nbsp;</a>
	<td><a href="#myModal-{{ user.id }}" data-toggle="modal" class="icon-trash">&nbsp;</a>
	<div class="modal hide" id="myModal-{{ user.id }}">
		<div class="modal-header">
	    	<button type="button" class="close" data-dismiss="modal">×</button>
	    	<h3>Utilsateur</h3>
	    </div>
	    <div class="modal-body">
	    	<p>Voulez-vous supprimer cet utilisateur ?</p>
	    </div>
	    <div class="modal-footer">
	    	<a href="#" class="btn" data-dismiss="modal">Non</a>
	    	<a href="#" class="btn btn-primary">Oui</a>
	    </div>
	</div></td>
</tr>
{% endfor %}
</tbody>
<tfoot>
	<tr>
		<td>{% trans %}Total{% endtrans %} : {{ users|length }} {% trans %}utilisateur(s){% endtrans %}</td>
	</tr>
</tfoot>
</table>
</div>
{% endblock body %}
