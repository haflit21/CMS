{% extends('::admin.html.twig') %}
{% block title %}{% trans %}Meta Manager{% endtrans %}{% endblock %}
{% block body %}

	<div class="row-fluid">
		<div class="span12">
			<h1 class="pull-left">{% trans %}Meta Manager{% endtrans %}</h1>
			<a href="{{ path('metas_new') }}" class="btn-new btn-small pull-right"><i class="admin-icon-plus-circled"></i> {% trans %}New{% endtrans %}</a>

			{% if app.session.flashbag.has('error') %}
				<div class="clear h20"></div>
			    <div class="alert alert-error">
			  		<a class="close" data-dismiss="alert" href="#">×</a>
			  		<ul class="unstyled">
			  		{% for message in app.session.flashbag.get('error') %}
			        	<li>{{ message }}</li>
			        {% endfor %}
			    	</ul>
			    </div>
			{% elseif app.session.flashbag.has('success') %}
				<div class="clear h20"></div>
			    <div class="alert alert-success">
			  		<a class="close" data-dismiss="alert" href="#">×</a>
			        <ul class="unstyled">
			  		{% for message in app.session.flashbag.get('success') %}
			        	<li>{{ message }}</li>
			        {% endfor %}
			    	</ul>
			    </div>
			{% endif %}

			{% if display %}


			  
				<form action="{{ path('metas') }}" method="post" id="form-main">
				<table class="table table-striped table-hover tablesorter">
		            <thead>
		                <tr>
		                  	<th>{% trans %}Type{% endtrans %}</th>
		                  	<th>{% trans %}Name{% endtrans %}</th>
		                  	<th>{% trans %}Value{% endtrans %}</th>
		                  	<th class="center-text">{% trans %}Published{% endtrans %}</th>
		                  	<th>{% trans %}Created{% endtrans %}</th>
		                  	<th>{% trans %}Actions{% endtrans %}</th>
		                </tr>
		            </thead>
		            <tbody>
		              	{% for meta in pagination %}
			              	<tr>
			                  	<td>{{ meta.type }}</td>
			                  	<td>{{ meta.name }}</td>
								<td>{{ meta.value }}</td>
			                  	<td class="center-text">
			                  		<a href="{{ path('metas_published', {'id' : meta.id }) }}">
					                  	{% if meta.published %}
					                  		<i class="icon-ok"></i>
					                  	{% else %}
					                  		<i class="icon-remove"></i>
					                  	{% endif %}
				                  	</a>
				                </td>
			                  	<td>
			                  		{{ meta.created|date('d/m/Y') }}
			                  	</td>
			                  	<td>
			                  		<a href="{{ path('metas_edit', {'id' : meta.id }) }}"><i class="icon-edit"></i></a>
			                  		<a href="{{ path('metas_delete', {'id' : meta.id }) }}"><i class="icon-trash"></i></a>
			                  	</td>
			                </tr>
						{% endfor %}
		            </tbody>
		            <tfoot>
		            	<tr>
		            		<td>{% trans %}Total{% endtrans %} : {{ total }} {% trans %}meta(s){% endtrans %}</td>
		            		<td colspan="6">
		            			{% trans %}Afficher{% endtrans %} :
				    			<select name="filter[display]" onchange="this.form.submit()">
				    				{% for i in options_pagination %}
				    					{% if i == nb %}
				    					<option value="{{ i }}" selected="selected">{{ i }} {% trans %}elements{% endtrans %}</option>
				    					{% else %}
				    					<option value="{{ i }}">{{ i }} {% trans %}elements{% endtrans %}</option>
				    					{% endif %}
				    				{% endfor %}
				    			</select>
				    		</td>
		            	</tr>
		            </tfoot>
		        </table>
		    </form>
		    {% endif %}
		    <div class="navigation">
			    {{ knp_pagination_render(pagination) }}
			</div>
	    </div>
	</div>

{% endblock body %}
{% block javascripts %}
<script type="text/javascript">

	$(function() {
		$('select').selectBoxIt();
	});
</script>
{% endblock %}
